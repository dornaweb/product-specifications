var Modal=function(){function t(t){this.props=t,this.className=""}return t.prototype.getJQueryElement=function(){return this.HTMLButtons=this.renderButtons(),this.HTMLActions=this.renderActions(),this.HTMLMain=this.renderMain(),this.HTMLHeader=this.renderHeader(),this.HTMLCloseButton=this.renderCloseButton(),this.HTMLModal=this.renderModal(),this.props.fullScreen&&(this.HTMLModal=this.renderFullScreenModal()),jQuery(jQuery.parseHTML(this.HTMLModal))},t.prototype.renderFullScreenModal=function(){return'<div class="modal__fullscreen">\n      '+this.HTMLModal+"\n    </div>"},t.prototype.renderModal=function(){return this.className=this.parseClass(this.props),this.props.fullScreen?this.props.isIEBrowser?this.HTMLCloseButton+'\n          <div class="modal--ie '+this.className+' js-modal">\n            '+this.HTMLHeader+"\n            "+this.HTMLMain+"\n          </div>":this.HTMLCloseButton+'\n          <div class="multi-modal__table">\n            <div class="multi-modal__table-cell">\n              <div class="modal '+this.className+' js-modal">\n                '+this.HTMLHeader+"\n                "+this.HTMLMain+"\n              </div>\n            </div>\n          </div>":this.props.isIEBrowser?'<div class="modal--ie '+this.className+' js-modal">\n          '+this.HTMLCloseButton+"\n          "+this.HTMLHeader+"\n          "+this.HTMLMain+"\n        </div>":'<div class="multi-modal__table">\n          <div class="multi-modal__table-cell">\n            <div class="modal '+this.className+' js-modal">\n              '+this.HTMLCloseButton+"\n              "+this.HTMLHeader+"\n              "+this.HTMLMain+"\n            </div>\n          </div>\n        </div>"},t.prototype.renderCloseButton=function(){var t="";if(this.props.closeButton||this.props.fullScreen){var e="";"mobile"===this.props.closeButton&&(e="modal__close--mobile"),this.props.fullScreen&&(e="modal__close--fullscreen"),t='<div class="modal__close '+e+' js-modal-close">&times;</div>'}return t},t.prototype.renderHeader=function(){return'<div class="modal__header">\n      '+this.props.title+"\n    </div>"},t.prototype.renderMain=function(){return"<"==this.props.content.substring(0,1)?this.content=this.props.content:this.content="\n        "+this.props.content+"\n",'<div class="modal__main">\n      <div class="modal__content">\n        '+this.content+"\n      </div>\n      "+this.HTMLActions+"\n    </div>"},t.prototype.renderActions=function(){return this.props.buttons?'<div class="modal__actions">\n      '+this.HTMLButtons+"\n    </div>":""},t.prototype.renderButtons=function(){var t=this,e="";return this.props.buttons&&Object.keys(this.props.buttons).forEach(function(s){var o="",r="modal__button "+t.parseClass(t.props.buttons[s]);t.props.buttons[s].href&&(o='href="'+t.props.buttons[s].href+'"'),t.props.buttons[s].closeOnClick&&(r+=" js-modal-close"),e+='<a role="button" '+o+' class="'+r+'">\n          '+t.props.buttons[s].value+"\n        </a>"}),e},t.prototype.parseClass=function(t){var e="";return t.classList&&(e+=t.classList.join(" ")),t.className&&(t.classList&&(e+=" "),e+=t.className),e.trim()},t}(),MultiModal=function(){function t(t){this.props=t,this.modals=[],this.remote={url:"",data:{}},this.isAnimating=!1,this.props.isIEBrowser=this.getIEBrowser(),this.props.closeButton||(this.props.closeButton="mobile")}return t.prototype.new=function(t){var e=this;if(!this.isAnimating){this.isAnimating=!0;var s=jQuery.extend(!0,{},this.props,t);this.modals.length||(jQuery(document.documentElement).css("overflow","hidden"),jQuery(document.body).append(this.renderMultiModal()),this.jQuerywrapper=jQuery(".js-modal-wrapper"),this.jQuerybackdrop=jQuery(".js-modal-backdrop"),this.jQuerybackdrop.click(function(){return e.onBackdropClick()})),s.remote?this.appendRemote(s):this.appendModal(new Modal(s).getJQueryElement(),s)}},t.prototype.appendRemote=function(t){var e=this;this.remote.url=t.remote,this.remote.data={},"object"==typeof t.remote&&(this.remote.url=t.remote.url,this.remote.data=t.remote.data);var s=jQuery.get(this.remote.url,this.remote.data);s.done(function(s){var o=jQuery(jQuery.parseHTML('<div class="modal--remote js-modal">\n        '+s+"\n      </div>",null,!0));e.appendModal(o,t)}),s.fail(function(t){if(404===t.status)throw new Error("MultiModal::FileNotFound: "+this.remote.url);if(500===t.status)throw new Error("MultiModal::InternalServerError: "+this.remote.url)})},t.prototype.appendModal=function(t,e){var s=this;this.modals.push({jQuerywrapper:t,allowBackdropClose:"boolean"!=typeof e.allowBackdropClose||e.allowBackdropClose}),this.currentModal=this.modals.length-1,this.jQuerywrapper.append(this.modals[this.currentModal].jQuerywrapper),this.modals[this.currentModal].jQuerymodal=jQuery(".js-modal").last(),(e.isIEBrowser||e.remote)&&this.centerModal();var o=new TimelineLite({onComplete:function(){s.isAnimating=!1}});this.animateInNewModal(o),this.animateInOtherModals(o),this.fadeInBackdrop(),e.fullScreen&&this.fadeInFullscreen()},t.prototype.close=function(){var t=this;if(!this.isAnimating){this.isAnimating=!0,1==this.modals.length&&this.jQuerybackdrop.removeClass("is-active");var e=new TimelineLite({onComplete:function(){return t.onCloseComplete()}});this.animateOutCurrentModal(e),this.animateOutOtherModals(e)}},t.prototype.closeAll=function(){var t=this;this.jQuerybackdrop.removeClass("is-active");var e=new TimelineLite({onComplete:function(){return t.onCloseAllComplete()}});this.animateOutAllModals(e)},t.prototype.onBackdropClick=function(){this.modals[this.currentModal].allowBackdropClose&&this.close()},t.prototype.renderMultiModal=function(){return'<div class="multi-modal__wrapper js-modal-wrapper">\n      <div class="multi-modal__backdrop js-modal-backdrop"></div>\n    </div>'},t.prototype.getIEBrowser=function(){var t=window.navigator.userAgent;return!!(~t.indexOf("MSIE ")||~t.indexOf("Trident/"))},t.prototype.animateInNewModal=function(t){t.set(this.modals[this.currentModal].jQuerymodal,{display:"block",opacity:0,scale:.5}).to(this.modals[this.currentModal].jQuerymodal,.5,{opacity:1,scale:1,ease:Power4.easeInOut},"in")},t.prototype.animateInOtherModals=function(t){if(this.modals.length>1)if(this.props.fullScreen)t.to(this.modals[this.currentModal-1].jQuerymodal,.5,{scale:"-=.15",opacity:0,ease:Power4.easeInOut},"in");else for(var e in this.modals)parseInt(e)===this.currentModal||parseInt(e)<this.currentModal-4||t.to(this.modals[e].jQuerymodal,.5,{y:"-=24",scale:"-=.15",opacity:"-=.25",ease:Power4.easeInOut},"in")},t.prototype.fadeInBackdrop=function(){this.jQuerybackdrop.addClass("is-active")},t.prototype.fadeInFullscreen=function(){this.modals[this.currentModal].jQuerywrapper.addClass("is-visible")},t.prototype.centerModal=function(){this.modals[this.currentModal].jQuerymodal.css({position:"absolute",left:"50%",top:"50%",marginTop:-this.modals[this.currentModal].jQuerymodal.height()/2,marginLeft:-this.modals[this.currentModal].jQuerymodal.width()/2})},t.prototype.animateOutCurrentModal=function(t){t.to(this.modals[this.currentModal].jQuerymodal,.32,{opacity:0,scale:.5,ease:Power4.easeInOut},"out"),this.props.fullScreen&&this.modals[this.currentModal].jQuerywrapper.removeClass("is-visible")},t.prototype.animateOutOtherModals=function(t){if(this.modals.length>1)if(this.props.fullScreen)t.to(this.modals[this.currentModal-1].jQuerymodal,.5,{scale:"+=.15",opacity:1,ease:Power4.easeInOut},"out");else for(var e in this.modals)parseInt(e)===this.currentModal||parseInt(e)<this.currentModal-4||t.to(this.modals[e].jQuerymodal,.5,{y:"+=24",scale:"+=.15",opacity:"+=.25",ease:Power4.easeInOut},"out")},t.prototype.animateOutAllModals=function(t){for(var e in this.modals)parseInt(e)>this.currentModal-4&&t.to(this.modals[e].jQuerymodal,.5,{opacity:0,scale:"-=.5",ease:Power4.easeInOut},"out");if(this.props.fullScreen)for(var e in this.modals)this.modals[e].jQuerywrapper.removeClass("is-visible")},t.prototype.onCloseComplete=function(){this.props.isIEBrowser?this.modals[this.currentModal].jQuerymodal.remove():this.modals[this.currentModal].jQuerywrapper.remove(),this.modals.splice(this.currentModal,1),this.currentModal=this.currentModal-1,this.modals.length||(jQuery(document.documentElement).css("overflow",""),this.jQuerywrapper.remove()),this.isAnimating=!1},t.prototype.onCloseAllComplete=function(){this.props.isIEBrowser?jQuery(".js-modal").remove():jQuery(".js-modal-wrapper").remove(),this.modals=[],this.currentModal=-1,jQuery(document.documentElement).css("overflow",""),this.jQuerywrapper.remove(),this.isAnimating=!1},t}();